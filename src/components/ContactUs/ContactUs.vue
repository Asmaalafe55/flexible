<template>
  <div class="parallax">
    <div class="contact-container">
      <div class="contact-card bg-[#D7CEC7]">
        <div class="card-title">Contact Us</div>
        <div
          class="flex flex-col justify-center items-center space-y-3 text-[25px]"
        >
          <div class="flex flex-col justify-center w-[25rem]">
            <div>Name</div>
            <input v-model="name" class="name-input" :class="nameIsEmpty" />
          </div>
          <div class="flex flex-col justify-center w-[25rem]">
            <div>Email</div>
            <input v-model="email" class="email-input" :class="emailIsEmpty" />
          </div>
          <div class="flex flex-col justify-center w-[25rem]">
            <div>Tell us how we can help</div>
            <textarea
              v-model="message"
              class="message-input"
              :class="messageIsEmpty"
            />
          </div>
          <div class="flex justify-center">
            <button
              @click="openModal()"
              data-modal-target="#modal"
              class="submit-button"
            >
              Submit
            </button>
          </div>
        </div>
      </div>
      <div class="modal" id="modal">
        <div class="modal-text">
          We got your request and we'll get back to you as soon as possible.
        </div>
        <div data-close-button class="ok-button-container">
          <button @click="closeModal()" class="ok-button">Ok</button>
        </div>
      </div>
      <div id="overlay"></div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      name: '',
      email: '',
      message: '',
      modal: document.querySelector('.modal'),
      overlay: document.getElementById('overlay'),
      nameIsEmpty: '',
      emailIsEmpty: '',
      messageIsEmpty: '',
    };
  },
  methods: {
    openModal: function () {
      if (!this.name || !this.email || !this.message) {
        if (!this.name) {
          this.nameIsEmpty = 'errorEmpty';
        } else {
          this.nameIsEmpty = 'notEmpty';
        }
        if (!this.email) {
          this.emailIsEmpty = 'errorEmpty';
        } else {
          if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email))
            this.emailIsEmpty = 'notEmpty';
          else this.emailIsEmpty = 'errorEmpty';
        }
        if (!this.message) {
          this.messageIsEmpty = 'errorEmpty';
        } else {
          this.messageIsEmpty = 'notEmpty';
        }
        alert('You must fill out all the boxes');
      } else {
        this.nameIsEmpty = 'notEmpty';
        this.emailIsEmpty = 'notEmpty';
        this.messageIsEmpty = 'notEmpty';

        if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)) {
          modal.classList.add('active');
          overlay.classList.add('active');
        } else {
          alert('You need to enter a valid email address');
          this.emailIsEmpty = 'errorEmpty';
        }
      }
    },
    closeModal: function () {
      modal.classList.remove('active');
      overlay.classList.remove('active');
    },
  },
};
</script>
